<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Poker My Mind – Preflop Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #05060a;
      --bg-alt: #10121b;
      --card-bg: #151827;
      --accent: #27c9a8;
      --accent-soft: rgba(39, 201, 168, 0.14);
      --accent-softer: rgba(39, 201, 168, 0.08);
      --danger: #ff5370;
      --text: #f8f9ff;
      --muted: #a3aec7;
      --border: #26293a;
      --font: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: var(--font);
      background: radial-gradient(circle at top, #14172a, #05060a 55%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    .app-shell {
      max-width: 1000px;
      margin: 0 auto;
      padding: 1.25rem 1rem 2.5rem;
    }

    @media (min-width: 768px) {
      .app-shell {
        padding: 2rem 1.5rem 3rem;
      }
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo {
      width: 40px;
      height: 40px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.12);
      background:
        radial-gradient(circle at 20% 0%, rgba(39,201,168,0.4), transparent 55%),
        radial-gradient(circle at 75% 100%, rgba(114,137,252,0.4), transparent 55%),
        #05060a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      font-weight: 700;
      letter-spacing: -0.04em;
      box-shadow:
        0 0 0 1px rgba(0,0,0,0.6),
        0 18px 35px rgba(0,0,0,0.7);
    }

    .brand-title {
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .brand-name {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }

    .tagline {
      font-size: 0.85rem;
      color: var(--muted);
      margin-top: 0.15rem;
    }

    .nav {
      display: inline-flex;
      background: rgba(8,10,20,0.85);
      border-radius: 999px;
      padding: 0.18rem;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 12px 25px rgba(0,0,0,0.55);
    }

    .nav button {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.18s ease-out;
      display: flex;
      align-items: center;
      gap: 0.25rem;
      white-space: nowrap;
    }

    .nav button.active {
      background: linear-gradient(135deg, var(--accent), #58d1ff);
      color: #05060a;
      box-shadow: 0 6px 18px rgba(39,201,168,0.45);
    }

    main {
      display: grid;
      gap: 1rem;
    }

    .card {
      background: linear-gradient(145deg, rgba(18,20,36,0.98), rgba(6,8,16,0.98));
      border-radius: 22px;
      padding: 1.1rem;
      border: 1px solid var(--border);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.7),
        0 0 0 1px rgba(255,255,255,0.02);
    }

    @media (min-width: 768px) {
      .card {
        padding: 1.4rem 1.5rem;
      }
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .card-subtitle {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .pill {
      font-size: 0.7rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
    }

    .block-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 0.4rem;
    }

    .preflop-layout {
      display: grid;
      gap: 1rem;
    }

    @media (min-width: 780px) {
      .preflop-layout {
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
        align-items: flex-start;
      }
    }

    .preflop-left,
    .preflop-right {
      display: grid;
      gap: 0.7rem;
    }

    .scenario-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
    }

    .scenario-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.24rem 0.7rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      color: var(--muted);
    }

    .scenario-pill strong {
      color: var(--text);
      letter-spacing: 0.06em;
    }

    .auto-deal {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      white-space: nowrap;
    }

    .auto-label {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .auto-toggle {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(4,6,12,0.8);
      color: var(--muted);
      font-size: 0.75rem;
      padding: 0.18rem 0.8rem;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      font-weight: 600;
      transition: all 0.16s ease-out;
    }

    .auto-toggle.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 0 0 1px rgba(39,201,168,0.35);
    }

    .cards-position-wrap {
      display: grid;
      gap: 0.75rem;
    }

    @media (min-width: 640px) {
      .cards-position-wrap {
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      }
    }

    .dealt-block,
    .position-block {
      background: rgba(4,7,15,0.9);
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,0.09);
      padding: 0.7rem 0.8rem;
    }

    .card-strip {
      display: flex;
      gap: 0.7rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .poker-card {
      width: 64px;
      height: 92px;
      border-radius: 16px;
      background:
        radial-gradient(circle at 15% 10%, rgba(255,255,255,0.24), transparent 55%),
        radial-gradient(circle at 85% 90%, rgba(88,209,255,0.16), transparent 55%),
        var(--card-bg);
      border: 1px solid rgba(255,255,255,0.28);
      box-shadow:
        0 0 18px rgba(39,201,168,0.24),
        0 10px 24px rgba(0,0,0,0.75);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .poker-card::before {
      content: '';
      position: absolute;
      inset: 1px;
      border-radius: 15px;
      border: 1px solid rgba(0,0,0,0.55);
      pointer-events: none;
    }

    .poker-rank {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      margin-bottom: 0.15rem;
    }

    .poker-suit {
      font-size: 1.2rem;
    }

    .poker-suit.red {
      color: #ff6b8b;
    }

    .hand-info {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      min-width: 0;
    }

    .hand-preview {
      font-family: "JetBrains Mono","SF Mono",ui-monospace,monospace;
      font-size: 0.85rem;
      padding: 0.22rem 0.6rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.09);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      max-width: 100%;
    }

    .hand-preview span {
      opacity: 0.7;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .small-note {
      font-size: 0.78rem;
      color: var(--muted);
      opacity: 0.9;
    }

    .position-meter {
      display: flex;
      gap: 0.35rem;
      flex-wrap: wrap;
      margin-bottom: 0.35rem;
    }

    .pos-chip {
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.1);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      color: var(--muted);
      background: rgba(255,255,255,0.02);
    }

    .pos-chip.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      box-shadow: 0 0 0 1px rgba(39,201,168,0.25);
    }

    .actions-block {
      background: rgba(4,7,15,0.9);
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,0.09);
      padding: 0.7rem 0.8rem 0.8rem;
      display: grid;
      gap: 0.6rem;
    }

    .actions-row {
      display: flex;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .action-btn {
      flex: 1 0 0;
      min-width: 0;
      padding: 0.5rem 0.6rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(5,8,16,0.98);
      color: var(--muted);
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      transition: all 0.16s ease-out;
    }

    .action-btn.selected {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      box-shadow: 0 0 0 1px rgba(39,201,168,0.28);
    }

    .action-btn.disabled {
      opacity: 0.45;
      cursor: not-allowed;
      border-style: dashed;
    }

    .primary-btn {
      width: 100%;
      padding: 0.6rem 0.9rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, var(--accent), #58d1ff);
      color: #05060a;
      font-size: 0.9rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(39,201,168,0.4);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      transition: transform 0.08s ease-out, box-shadow 0.08s ease-out, filter 0.08s ease-out;
    }

    .primary-btn:active {
      transform: translateY(1px);
      box-shadow: 0 6px 18px rgba(39,201,168,0.35);
      filter: brightness(0.97);
    }

    .primary-btn.disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
      filter: grayscale(0.2) brightness(0.85);
    }

    .auto-timer {
      margin-top: 0.35rem;
      display: flex;
      align-items: center;
      gap: 0.45rem;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .auto-timer-track {
      flex: 1;
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      overflow: hidden;
    }

    .auto-timer-bar {
      height: 100%;
      width: 0;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), #58d1ff);
      transform-origin: left center;
    }

    .result {
      padding: 0.7rem 0.8rem;
      border-radius: 16px;
      background: rgba(5,9,20,0.97);
      border: 1px solid rgba(255,255,255,0.06);
      display: grid;
      gap: 0.45rem;
    }

    .grade-pill {
      display: inline-flex;
      align-items: baseline;
      gap: 0.4rem;
    }

    .grade-letter {
      font-size: 1.4rem;
      font-weight: 800;
      letter-spacing: 0.06em;
    }

    .grade-context {
      font-size: 0.8rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .grade-badge-good {
      color: var(--accent);
    }

    .grade-badge-bad {
      color: var(--danger);
    }

    .recommendation {
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .explanation {
      font-size: 0.9rem;
      color: var(--muted);
      line-height: 1.45;
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.2rem;
    }

    .meta span {
      font-size: 0.75rem;
      padding: 0.16rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.08);
      color: var(--muted);
    }

    .stats-card {
      margin-top: 0.5rem;
      padding: 0.65rem 0.8rem;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(3,6,14,0.98);
      display: grid;
      gap: 0.5rem;
    }

    @media (min-width: 640px) {
      .stats-card {
        grid-template-columns: minmax(0, 1.1fr) auto auto;
        align-items: center;
      }
    }

    .stat-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .stat-chip {
      font-size: 0.75rem;
      padding: 0.18rem 0.55rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.06);
      color: var(--muted);
    }

    .report-card {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 90px;
      padding: 0.4rem 0.5rem;
      border-radius: 999px;
      background: var(--accent-softer);
      border: 1px solid rgba(39,201,168,0.45);
      box-shadow: 0 0 16px rgba(39,201,168,0.3);
    }

    .report-main {
      display: flex;
      align-items: baseline;
      gap: 0.2rem;
    }

    .report-letter {
      font-size: 1.1rem;
      font-weight: 800;
    }

    .report-percent {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .report-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-top: 0.1rem;
    }

    .ghost-btn {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(4,6,12,0.8);
      color: var(--muted);
      font-size: 0.78rem;
      padding: 0.3rem 0.75rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      font-weight: 600;
      transition: all 0.16s ease-out;
      justify-self: flex-end;
    }

    .ghost-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .two-col {
      display: grid;
      gap: 0.8rem;
    }

    @media (min-width: 640px) {
      .two-col {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    label {
      font-size: 0.8rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 600;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    input[type="number"] {
      width: 100%;
      padding: 0.55rem 0.7rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(6,8,16,0.95);
      color: var(--text);
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.18s ease-out, box-shadow 0.18s ease-out, background 0.18s ease-out;
      appearance: none;
    }

    input[type="number"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(39,201,168,0.35);
      background: rgba(13,17,30,0.98);
    }

    .muted-note {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.4rem;
    }

    .about-text {
      font-size: 0.9rem;
      color: var(--muted);
      line-height: 1.45;
    }

    .about-text strong {
      color: var(--text);
    }

    footer {
      margin-top: 1.4rem;
      font-size: 0.75rem;
      color: var(--muted);
      text-align: center;
      opacity: 0.7;
    }

    ul {
      margin-top: 0.3rem;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="brand">
        <div class="logo">PM</div>
        <div>
          <div class="brand-title">Poker Training</div>
          <div class="brand-name">Poker My Mind</div>
          <div class="tagline">Judge your decisions, not your luck.</div>
        </div>
      </div>
      <nav class="nav">
        <button data-tab="preflop" class="active">Preflop Trainer</button>
        <button data-tab="potodds">Pot Odds</button>
        <button data-tab="about">About</button>
      </nav>
    </header>

    <main>
      <!-- Preflop Trainer -->
      <section id="tab-preflop" class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Preflop Trainer</div>
            <div class="card-subtitle">
              Get dropped into a random spot, choose your move, and see if it was a good decision – before any flop.
            </div>
          </div>
          <span class="pill">Random scenario · Unopened pot</span>
        </div>

        <div class="preflop-layout">
          <div class="preflop-left">
            <div class="scenario-bar">
              <div class="scenario-pill" id="scenarioPosition">
                POS: <strong>BTN (Button)</strong>
              </div>
              <div class="auto-deal">
                <span class="auto-label">Auto deal if A</span>
                <button type="button" class="auto-toggle" id="autoDealToggle" aria-pressed="false">Off</button>
              </div>
            </div>

            <div class="cards-position-wrap">
              <div class="dealt-block">
                <div class="block-label">Dealt cards</div>
                <div class="card-strip">
                  <div class="poker-card" id="card1">
                    <div class="poker-rank" id="card1Rank">A</div>
                    <div class="poker-suit" id="card1Suit">♠</div>
                  </div>
                  <div class="poker-card" id="card2">
                    <div class="poker-rank" id="card2Rank">A</div>
                    <div class="poker-suit" id="card2Suit">♥</div>
                  </div>
                  <div class="hand-info">
                    <div class="hand-preview" id="handPreview">
                      <span>Hand</span>
                      <strong>AA</strong>
                    </div>
                    <div class="small-note">
                      Cards glow, you decide: fold, check, limp, or open-raise.
                    </div>
                  </div>
                </div>
              </div>

              <div class="position-block">
                <div class="block-label">Your position</div>
                <div class="position-meter">
                  <span class="pos-chip" data-band="early">Early</span>
                  <span class="pos-chip" data-band="middle">Middle</span>
                  <span class="pos-chip" data-band="late">Late</span>
                  <span class="pos-chip" data-band="blinds">Blinds</span>
                </div>
                <div class="small-note" id="positionNote">
                  Late position: you can open wider and use your positional edge.
                </div>
              </div>
            </div>

            <div class="actions-block">
              <div class="block-label">Actions</div>
              <div class="actions-row" id="actionButtons">
                <button type="button" class="action-btn" data-action="FOLD">Fold</button>
                <button type="button" class="action-btn" data-action="CHECK" id="checkBtn" style="display:none;">
                  Check
                </button>
                <button
                  type="button"
                  class="action-btn"
                  data-action="CALL"
                  id="callBtn"
                  title="Limping = calling the big blind preflop instead of raising. In the BB with no raise, you check instead of calling."
                >
                  Call / Limp
                </button>
                <button type="button" class="action-btn" data-action="RAISE">Raise / Open</button>
              </div>
              <button class="primary-btn" id="primaryBtn">
                Evaluate decision
                <span>→</span>
              </button>
              <div class="auto-timer" id="autoDealTimer" style="display:none;">
                <div class="auto-timer-track">
                  <div class="auto-timer-bar" id="autoDealBar"></div>
                </div>
                <span class="auto-timer-label">Next hand in 2s…</span>
              </div>
            </div>
          </div>

          <div class="preflop-right">
            <div class="block-label">Feedback</div>
            <div class="result" id="resultBox">
              <div class="grade-pill">
                <span class="grade-letter grade-badge-good" id="gradeLetter">A</span>
                <span class="grade-context" id="gradeContext">Good discipline.</span>
              </div>
              <div class="recommendation" id="recommendation">
                Recommended: Folding is correct.
              </div>
              <p class="explanation" id="explanation">
                Deal a hand, pick your action, then see whether you played too tight, too loose, or just right based on
                simple opening ranges by position.
              </p>
              <div class="meta">
                <span>Spot: Unopened pot</span>
                <span>Model: Simple cash-game open ranges</span>
              </div>
            </div>

            <div class="block-label" style="margin-top:0.7rem;">Statistical data / odds</div>
            <div class="stats-card">
              <div class="stat-group">
                <span class="stat-chip" id="statTotal">Decisions: 0</span>
                <span class="stat-chip" id="statGood">Good (A/B): 0</span>
                <span class="stat-chip" id="statLeaky">Leaky (C–F): 0</span>
              </div>
              <div class="report-card">
                <div class="report-main">
                  <span class="report-letter" id="reportGrade">–</span>
                  <span class="report-percent" id="reportPercent">—%</span>
                </div>
                <div class="report-label">Overall grade</div>
              </div>
              <button type="button" class="ghost-btn" id="resetStatsBtn">
                Reset stats
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Pot Odds -->
      <section id="tab-potodds" class="card" style="display:none;">
        <div class="card-header">
          <div>
            <div class="card-title">Pot Odds Helper</div>
            <div class="card-subtitle">
              Quick math to check if a call with a draw makes sense.
            </div>
          </div>
          <span class="pill">Math · Single-street</span>
        </div>

        <div class="two-col">
          <div class="field-grid">
            <div class="field-group">
              <label for="potSize">Pot size before villain bets</label>
              <input type="number" id="potSize" min="0" step="0.01" placeholder="e.g. 10" />
            </div>
            <div class="field-group">
              <label for="betSize">Bet you’re facing</label>
              <input type="number" id="betSize" min="0" step="0.01" placeholder="e.g. 5" />
            </div>
            <div class="field-group">
              <label for="outs">Your number of outs</label>
              <input type="number" id="outs" min="0" max="20" step="1" placeholder="e.g. 9 for a flush draw" />
            </div>
            <button class="primary-btn" id="calculateOddsBtn">
              Calculate pot odds
              <span>≈</span>
            </button>
          </div>
          <div>
            <div class="result" id="oddsResultBox">
              <div class="grade-pill">
                <span class="grade-letter" id="oddsSummary">–</span>
                <span class="grade-context">Pot odds vs draw odds</span>
              </div>
              <div class="explanation" id="oddsExplanation">
                Enter the pot size, bet size you’re facing, and your approximate outs.
                You’ll see:
                <ul style="margin: 0.4rem 0 0 1.1rem; padding: 0; font-size: 0.85rem;">
                  <li>Pot odds (% you need to break even)</li>
                  <li>Approximate equity from your outs</li>
                  <li>Whether a call is roughly +EV or -EV</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <p class="muted-note">
          Note: This is a simple one-street estimate. Real hands require implied odds, reverse implied odds, and ranges,
          but this keeps your baseline math honest.
        </p>
      </section>

      <!-- About -->
      <section id="tab-about" class="card" style="display:none;">
        <div class="card-header">
          <div>
            <div class="card-title">About Poker My Mind</div>
            <div class="card-subtitle">
              A proof-of-concept trainer focused on decision quality over short-term results.
            </div>
          </div>
          <span class="pill">Prototype · v0.6</span>
        </div>
        <div class="about-text">
          <p>
            <strong>Poker My Mind</strong> is built around one core idea:
            judge your poker by the quality of your decisions, not by the luck of the runout.
          </p>
          <p>
            This prototype deals you random preflop scenarios in unopened pots, lets you pick an action, and grades
            your choice against simple open-raise ranges by position.
          </p>
          <p>
            It includes:
          </p>
          <ul>
            <li>Random hand + position generator</li>
            <li>One evaluation per hand (no spamming for the answer)</li>
            <li>Big blind-specific “Check vs limp” teaching</li>
            <li>Optional auto-deal that fires new hands after strong decisions</li>
            <li>A basic pot odds helper for draw math</li>
          </ul>
          <p>
            Future steps: build-out for facing opens & 3-bets, postflop decisions, and full hand review with leak
            analysis.
          </p>
        </div>
      </section>
    </main>

    <footer>
      Poker My Mind · Prototype trainer – not a real-time assistance tool for any specific poker site or casino.
      Always follow the rules of your cardroom.
    </footer>
  </div>

  <script>
    // ---------- Tabs ----------
    const tabs = document.querySelectorAll('.nav button');
    const sections = {
      preflop: document.getElementById('tab-preflop'),
      potodds: document.getElementById('tab-potodds'),
      about: document.getElementById('tab-about'),
    };

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const tab = btn.dataset.tab;
        Object.entries(sections).forEach(([key, el]) => {
          el.style.display = key === tab ? 'block' : 'none';
        });
      });
    });

    // ---------- Preflop logic ----------
    const rankOrder = ['A','K','Q','J','T','9','8','7','6','5','4','3','2'];
    const openRangesByPosition = {
      UTG: [
        'AA','KK','QQ','JJ','TT','99',
        'AKs','AQs','AJs','KQs',
        'AKo','AQo',
      ],
      MP: [
        'AA','KK','QQ','JJ','TT','99','88','77',
        'AKs','AQs','AJs','ATs','KQs','KJs','QJs',
        'AKo','AQo','KQo',
      ],
      CO: [
        'AA','KK','QQ','JJ','TT','99','88','77','66','55','44','33','22',
        'AKs','AQs','AJs','ATs','A9s','A8s',
        'KQs','KJs','KTs',
        'QJs','QTs','JTs','T9s','98s',
        'AKo','AQo','AJo','KQo','KJo','QJo',
      ],
      BTN: [
        'AA','KK','QQ','JJ','TT','99','88','77','66','55','44','33','22',
        'AKs','AQs','AJs','ATs','A9s','A8s','A7s','A6s','A5s','A4s','A3s','A2s',
        'KQs','KJs','KTs','K9s',
        'QJs','QTs','Q9s',
        'JTs','J9s',
        'T9s','T8s',
        '98s','97s','87s','76s','65s',
        'AKo','AQo','AJo','ATo','A9o',
        'KQo','KJo','KTo',
        'QJo','QTo',
        'JTo',
      ],
      SB: [
        'AA','KK','QQ','JJ','TT','99','88','77','66','55',
        'AKs','AQs','AJs','ATs','A9s','A8s',
        'KQs','KJs','KTs',
        'QJs','QTs','JTs','T9s','98s',
        'AKo','AQo','AJo','KQo','KJo','QJo',
      ],
      BB: [
        'AA','KK','QQ','JJ','TT','99','88','77',
        'AKs','AQs','AJs','ATs','KQs','KJs',
        'QJs','JTs','T9s',
        'AKo','AQo','AJo','KQo',
      ],
    };

    function canonicalHand(rank1, rank2, suitedFlag) {
      if (rank1 === rank2) {
        return rank1 + rank2;
      }
      const idx1 = rankOrder.indexOf(rank1);
      const idx2 = rankOrder.indexOf(rank2);
      const high = idx1 <= idx2 ? rank1 : rank2;
      const low = idx1 <= idx2 ? rank2 : rank1;
      return `${high}${low}${suitedFlag}`;
    }

    function evaluatePreflopOpen(position, hand, userAction) {
      const allowed = openRangesByPosition[position] || [];
      const isInOpenRange = allowed.includes(hand);

      // Special handling for big blind check/fold/raise
      if (position === 'BB') {
        if (userAction === 'CHECK') {
          if (isInOpenRange) {
            return {
              grade: 'B',
              good: true,
              context: 'Safe but passive.',
              recommended: 'Raising prints more value.',
              explanation: `Checking ${hand} in the big blind is never terrible when you get a free flop, but raising strong hands here builds a pot when you are ahead.`,
            };
          } else {
            return {
              grade: 'A',
              good: true,
              context: 'Correct free check.',
              recommended: 'Checking is ideal.',
              explanation: `With ${hand} in the big blind and no raise, checking to see a free flop is the highest-EV default. You realize your equity without risking chips preflop.`,
            };
          }
        }
        if (userAction === 'FOLD') {
          return {
            grade: 'D',
            good: false,
            context: 'Too tight.',
            recommended: 'Check instead of folding.',
            explanation: `Folding in the big blind when you can check for free throws away equity. Use the check option to see a flop instead of mucking.`,
          };
        }
        // Raises in BB fall through to the generic logic below
      }

      if (isInOpenRange) {
        if (userAction === 'RAISE') {
          return {
            grade: 'A',
            good: true,
            context: 'Solid open.',
            recommended: 'Raise / open this hand.',
            explanation: `${hand} is in your recommended open range from ${position}. Opening here applies pressure and prints value long term.`,
          };
        }
        if (userAction === 'FOLD') {
          return {
            grade: 'F',
            good: false,
            context: 'Too tight.',
            recommended: 'Raise this hand instead of folding.',
            explanation: `Folding ${hand} from ${position} is leaving money on the table. This hand should be opened in most lineups.`,
          };
        }
        if (userAction === 'CALL') {
          return {
            grade: 'C',
            good: false,
            context: 'Leaky limp.',
            recommended: 'Raise, don\'t limp.',
            explanation: `Limping ${hand} from ${position} is usually dominated and hard to play. Raising is higher EV and keeps your range aggressive.`,
          };
        }
      } else {
        if (userAction === 'RAISE') {
          return {
            grade: 'D',
            good: false,
            context: 'Too loose.',
            recommended: 'Fold this hand preflop.',
            explanation: `${hand} is outside the recommended open range from ${position}. Opening hands like this loses money over time.`,
          };
        }
        if (userAction === 'CALL') {
          return {
            grade: 'D',
            good: false,
            context: 'Weak limp.',
            recommended: 'Just fold this hand.',
            explanation: `Calling or limping ${hand} here is rarely profitable. In an unopened pot, you want to raise strong hands and fold the rest.`,
          };
        }
        if (userAction === 'FOLD') {
          return {
            grade: 'A',
            good: true,
            context: 'Good discipline.',
            recommended: 'Folding is correct.',
            explanation: `${hand} is not in your profitable open range from ${position}. Folding keeps your range tight and avoids marginal spots.`,
          };
        }
      }

      return {
        grade: 'B',
        good: true,
        context: 'Reasonable.',
        recommended: 'Borderline, but not terrible.',
        explanation: `This is a borderline spot for ${hand} from ${position}. Against tighter fields, folding is fine; against weak players, opening may be okay.`,
      };
    }

    const positions = ['UTG','MP','CO','BTN','SB','BB'];
    const positionLabels = {
      UTG: 'UTG (Early)',
      MP: 'MP (Middle)',
      CO: 'CO (Cutoff)',
      BTN: 'BTN (Button)',
      SB: 'SB (Small Blind)',
      BB: 'BB (Big Blind)',
    };

    const positionBands = {
      UTG: 'early',
      MP: 'middle',
      CO: 'late',
      BTN: 'late',
      SB: 'blinds',
      BB: 'blinds',
    };

    const positionBandNotes = {
      early: 'Early position: many players left to act, so play tighter and stick to strong hands.',
      middle: 'Middle position: you can add some hands, but still respect the players left to act.',
      late: 'Late position: you can open wider and lean on your positional edge.',
      blinds: 'Blinds: you are out of position postflop, so be selective with the hands you play.',
    };

    const ranks = ['A','K','Q','J','T','9','8','7','6','5','4','3','2'];
    const suits = [
      { symbol: '♠', color: 'black' },
      { symbol: '♥', color: 'red' },
      { symbol: '♦', color: 'red' },
      { symbol: '♣', color: 'black' },
    ];

    const scenarioPositionEl = document.getElementById('scenarioPosition');
    const positionNoteEl = document.getElementById('positionNote');
    const positionChips = document.querySelectorAll('.pos-chip');

    const card1RankEl = document.getElementById('card1Rank');
    const card1SuitEl = document.getElementById('card1Suit');
    const card2RankEl = document.getElementById('card2Rank');
    const card2SuitEl = document.getElementById('card2Suit');
    const handPreviewValueEl = document.querySelector('#handPreview strong');

    const actionButtonsEl = document.getElementById('actionButtons');
    const callBtn = document.getElementById('callBtn');
    const checkBtn = document.getElementById('checkBtn');
    const primaryBtn = document.getElementById('primaryBtn');
    const autoDealToggle = document.getElementById('autoDealToggle');
    const autoDealTimerEl = document.getElementById('autoDealTimer');
    const autoDealBarEl = document.getElementById('autoDealBar');

    const gradeLetterEl = document.getElementById('gradeLetter');
    const gradeContextEl = document.getElementById('gradeContext');
    const recommendationEl = document.getElementById('recommendation');
    const explanationEl = document.getElementById('explanation');

    const statTotalEl = document.getElementById('statTotal');
    const statGoodEl = document.getElementById('statGood');
    const statLeakyEl = document.getElementById('statLeaky');
    const reportGradeEl = document.getElementById('reportGrade');
    const reportPercentEl = document.getElementById('reportPercent');
    const resetStatsBtn = document.getElementById('resetStatsBtn');

    let currentPosition = 'BTN';
    let currentCanonicalHand = 'AA';
    let selectedAction = null;
    let hasEvaluatedCurrent = false;
    let autoDealEnabled = false;
    let awaitingManualDeal = false;
    let autoDealTimeoutId = null;

    function randomFrom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function displayRank(rank) {
      return rank === 'T' ? '10' : rank;
    }

    function updatePositionUI() {
      const label = positionLabels[currentPosition] || currentPosition;
      scenarioPositionEl.innerHTML = `POS: <strong>${label}</strong>`;
      const band = positionBands[currentPosition] || 'middle';

      positionChips.forEach(chip => {
        chip.classList.toggle('active', chip.dataset.band === band);
      });

      positionNoteEl.textContent = positionBandNotes[band];
    }

    function updateActionsForPosition() {
      if (!callBtn || !checkBtn) return;
      const allActionBtns = actionButtonsEl.querySelectorAll('.action-btn');

      if (currentPosition === 'BB') {
        checkBtn.style.display = 'flex';
        callBtn.classList.add('disabled');
        callBtn.setAttribute('aria-disabled', 'true');
        callBtn.title = 'In the big blind with no raise, you don\'t call – checking is free.';
      } else {
        checkBtn.style.display = 'none';
        callBtn.classList.remove('disabled');
        callBtn.removeAttribute('aria-disabled');
        callBtn.title = 'Limping = calling the big blind preflop instead of raising.';
        if (selectedAction === 'CHECK') {
          selectedAction = null;
        }
      }

      allActionBtns.forEach(b => {
        b.classList.toggle('selected', b.dataset.action === selectedAction);
      });
    }

    function clearAutoDealTimer() {
      if (autoDealTimeoutId !== null) {
        clearTimeout(autoDealTimeoutId);
        autoDealTimeoutId = null;
      }
      if (autoDealTimerEl) {
        autoDealTimerEl.style.display = 'none';
      }
      if (autoDealBarEl) {
        autoDealBarEl.style.width = '0%';
      }
    }

    function setPrimaryBtnToEvaluate() {
      primaryBtn.innerHTML = 'Evaluate decision<span>→</span>';
    }

    function setPrimaryBtnToDeal() {
      primaryBtn.innerHTML = 'Deal new hand<span>♠</span>';
    }

    function resetEvaluateState() {
      hasEvaluatedCurrent = false;
      awaitingManualDeal = false;
      primaryBtn.classList.remove('disabled');
      primaryBtn.removeAttribute('aria-disabled');
      primaryBtn.disabled = false;
      setPrimaryBtnToEvaluate();
      clearAutoDealTimer();
    }

    function dealScenario() {
      currentPosition = randomFrom(positions);

      const r1 = randomFrom(ranks);
      const s1 = randomFrom(suits);
      let r2 = randomFrom(ranks);
      let s2 = randomFrom(suits);
      while (r2 === r1 && s2.symbol === s1.symbol) {
        r2 = randomFrom(ranks);
        s2 = randomFrom(suits);
      }

      const suitedFlag = r1 === r2 ? '' : (s1.symbol === s2.symbol ? 's' : 'o');
      currentCanonicalHand = canonicalHand(r1, r2, suitedFlag || (s1.symbol === s2.symbol ? 's' : 'o'));

      card1RankEl.textContent = displayRank(r1);
      card1SuitEl.textContent = s1.symbol;
      card1SuitEl.classList.toggle('red', s1.color === 'red');

      card2RankEl.textContent = displayRank(r2);
      card2SuitEl.textContent = s2.symbol;
      card2SuitEl.classList.toggle('red', s2.color === 'red');

      handPreviewValueEl.textContent = currentCanonicalHand;

      selectedAction = null;
      actionButtonsEl.querySelectorAll('.action-btn').forEach(b => b.classList.remove('selected'));

      updatePositionUI();
      updateActionsForPosition();
      resetEvaluateState();
    }

    actionButtonsEl.addEventListener('click', (e) => {
      const btn = e.target.closest('.action-btn');
      if (!btn) return;
      if (btn.classList.contains('disabled') || btn.getAttribute('aria-disabled') === 'true') {
        return;
      }
      selectedAction = btn.dataset.action;
      actionButtonsEl.querySelectorAll('.action-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
    });

    // Stats in localStorage
    const statsKey = 'pokerMyMind_preflopStats';

    function loadStats() {
      try {
        const raw = localStorage.getItem(statsKey);
        if (!raw) return { total: 0, good: 0, leaky: 0 };
        return JSON.parse(raw);
      } catch {
        return { total: 0, good: 0, leaky: 0 };
      }
    }

    function saveStats(stats) {
      try {
        localStorage.setItem(statsKey, JSON.stringify(stats));
      } catch (e) {
        // ignore
      }
    }

    function overallGradeFromStats(stats) {
      if (!stats.total) return { letter: '–', percent: null };
      const pct = (stats.good / stats.total) * 100;
      let letter = 'F';
      if (pct >= 80) letter = 'A';
      else if (pct >= 65) letter = 'B';
      else if (pct >= 50) letter = 'C';
      else if (pct >= 35) letter = 'D';
      return { letter, percent: Math.round(pct) };
    }

    function updateStatsUI() {
      const stats = loadStats();
      statTotalEl.textContent = `Decisions: ${stats.total}`;
      statGoodEl.textContent = `Good (A/B): ${stats.good}`;
      statLeakyEl.textContent = `Leaky (C–F): ${stats.leaky}`;
      const overall = overallGradeFromStats(stats);
      reportGradeEl.textContent = overall.letter;
      reportPercentEl.textContent =
        overall.percent === null ? '—%' : `${overall.percent}%`;
    }

    updateStatsUI();

    resetStatsBtn.addEventListener('click', () => {
      localStorage.removeItem(statsKey);
      updateStatsUI();
    });

    if (autoDealToggle) {
      autoDealToggle.addEventListener('click', () => {
        autoDealEnabled = !autoDealEnabled;
        autoDealToggle.setAttribute('aria-pressed', autoDealEnabled ? 'true' : 'false');
        autoDealToggle.classList.toggle('active', autoDealEnabled);
        autoDealToggle.textContent = autoDealEnabled ? 'On' : 'Off';

        if (!autoDealEnabled) {
          clearAutoDealTimer();
          if (hasEvaluatedCurrent) {
            awaitingManualDeal = true;
            primaryBtn.classList.remove('disabled');
            primaryBtn.removeAttribute('aria-disabled');
            primaryBtn.disabled = false;
            setPrimaryBtnToDeal();
          }
        }
      });
    }

    function startAutoDealCountdown() {
      clearAutoDealTimer();
      if (!autoDealTimerEl || !autoDealBarEl) {
        autoDealTimeoutId = setTimeout(() => {
          dealScenario();
        }, 2000);
        return;
      }
      autoDealTimerEl.style.display = 'flex';
      autoDealBarEl.style.width = '0%';

      const start = performance.now();
      const duration = 2000;

      function step(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        autoDealBarEl.style.width = (progress * 100) + '%';

        if (progress < 1 && autoDealEnabled && hasEvaluatedCurrent) {
          requestAnimationFrame(step);
        } else if (progress >= 1 && hasEvaluatedCurrent && autoDealEnabled) {
          dealScenario();
          clearAutoDealTimer();
        }
      }

      requestAnimationFrame(step);
    }

    primaryBtn.addEventListener('click', () => {
      if (awaitingManualDeal && !autoDealEnabled) {
        dealScenario();
        return;
      }

      if (hasEvaluatedCurrent) {
        return;
      }

      if (!selectedAction) {
        gradeLetterEl.textContent = '–';
        gradeLetterEl.classList.remove('grade-badge-good', 'grade-badge-bad');
        gradeContextEl.textContent = 'Pick an action.';
        recommendationEl.textContent = 'Choose Fold, Check, Call/Limp, or Raise to get feedback.';
        explanationEl.textContent =
          'The trainer only grades a decision after you lock in an action for this hand.';
        return;
      }

      const evalResult = evaluatePreflopOpen(currentPosition, currentCanonicalHand, selectedAction);

      gradeLetterEl.textContent = evalResult.grade;
      gradeLetterEl.classList.toggle('grade-badge-good', evalResult.good);
      gradeLetterEl.classList.toggle('grade-badge-bad', !evalResult.good);
      gradeContextEl.textContent = evalResult.context;
      recommendationEl.textContent = `Recommended: ${evalResult.recommended}`;
      explanationEl.textContent = evalResult.explanation;

      const stats = loadStats();
      stats.total += 1;
      if (evalResult.good && (evalResult.grade === 'A' || evalResult.grade === 'B')) {
        stats.good += 1;
      } else {
        stats.leaky += 1;
      }
      saveStats(stats);
      updateStatsUI();

      hasEvaluatedCurrent = true;

      if (autoDealEnabled && evalResult.grade === 'A') {
        primaryBtn.classList.add('disabled');
        primaryBtn.setAttribute('aria-disabled', 'true');
        primaryBtn.disabled = true;
        startAutoDealCountdown();
      } else {
        awaitingManualDeal = true;
        primaryBtn.classList.remove('disabled');
        primaryBtn.removeAttribute('aria-disabled');
        primaryBtn.disabled = false;
        setPrimaryBtnToDeal();
      }
    });

    // ---------- Pot odds helper ----------
    function approximateEquityFromOuts(outs) {
      return outs * 2.2;
    }

    document.getElementById('calculateOddsBtn').addEventListener('click', () => {
      const potSize = parseFloat(document.getElementById('potSize').value || '0');
      const betSize = parseFloat(document.getElementById('betSize').value || '0');
      const outs = parseInt(document.getElementById('outs').value || '0', 10);

      const summaryEl = document.getElementById('oddsSummary');
      const explanationEl2 = document.getElementById('oddsExplanation');

      if (betSize <= 0 || potSize < 0 || outs < 0) {
        summaryEl.textContent = '–';
        explanationEl2.textContent = 'Please enter a valid pot, bet, and outs to calculate pot odds.';
        return;
      }

      const potAfterCall = potSize + betSize;
      const potOddsNeeded = (betSize / potAfterCall) * 100;
      const approxEquity = approximateEquityFromOuts(outs);

      const roundedPotOdds = Math.round(potOddsNeeded * 10) / 10;
      const roundedEquity = Math.round(approxEquity * 10) / 10;

      let verdict;
      if (approxEquity >= potOddsNeeded + 2) {
        verdict = 'Call looks +EV (ignoring implied/reverse implied odds).';
        summaryEl.textContent = 'Call';
      } else if (approxEquity <= potOddsNeeded - 2) {
        verdict = 'Call looks -EV; you are not winning often enough for this price.';
        summaryEl.textContent = 'Fold';
      } else {
        verdict = 'Very close spot; other factors (ranges, position, future streets) should decide.';
        summaryEl.textContent = 'Borderline';
      }

      explanationEl2.innerHTML =
        `Pot odds required: <strong>${roundedPotOdds.toFixed(1)}%</strong><br>` +
        `Approximate equity from outs: <strong>${roundedEquity.toFixed(1)}%</strong><br><br>` +
        verdict;
    });

    // Deal an initial scenario on load
    dealScenario();
  </script>
</body>
</html>
